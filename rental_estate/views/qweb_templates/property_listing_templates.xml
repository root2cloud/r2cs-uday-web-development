<odoo>
    <template id="property_listing_page" name="Rental Estate Listing Page">
        <t t-call="website.layout">
            <link rel="stylesheet" href="/rental_estate/static/src/css/property_styles.css"/>
            <main id="wrap" role="main" class="property-listing-page">
                <!-- Page Hero Section -->
                <section id="property-hero" class="hero-section py-5 bg-light text-center">
                    <div class="container">
                        <h1 class="display-4">
                            <t t-if="property_type != 'all'">
                                <t t-out="property_type.capitalize()"/>
                                Properties
                            </t>
                            <t t-else="">All Properties</t>
                        </h1>
                        <p class="lead">Explore our exclusive collection of rental estate properties.</p>
                        <!-- Search and Filter Form -->
                        <form method="get"
                              t-att-action="property_type == 'all' and '/properties' or '/properties/' + property_type"
                              class="d-flex justify-content-center gap-2 my-4">
                            <t t-if="property_type == 'all'">
                                <select name="property_type" class="form-select w-auto">
                                    <option t-att-selected="property_type == 'all'" value="all">All Properties</option>
                                    <t t-foreach="valid_types" t-as="ptype">
                                        <option t-att-selected="property_type == ptype" t-att-value="ptype"
                                                t-out="ptype.capitalize()"/>
                                    </t>
                                </select>
                            </t>
                            <input type="text" name="zip_code" t-att-value="zip_code or ''" placeholder="Enter ZIP Code"
                                   class="form-control w-50"/>
                            <button type="submit" class="btn btn-primary">Search</button>
                        </form>
                        <nav class="mb-3 text-center">
                            <a href="/properties" t-att-class="{'active': property_type == 'all'}"
                               class="btn btn-outline-primary mx-1">All
                            </a>
                            <t t-foreach="valid_types" t-as="ptype">
                                <a t-att-href="'/properties/%s' % ptype"
                                   t-att-class="{'active': property_type == ptype}" class="btn btn-outline-primary mx-1"
                                   t-out="ptype.capitalize()"/>
                            </t>
                        </nav>

                    </div>
                </section>

                <!-- Filters & Sorting - Placeholder -->
                <section id="property-filters" class="container my-4">
                    <!-- Future dynamic filter controls -->
                </section>

                <!-- Main Property Listings -->
                <section id="property-listings" class="container mb-5">
                    <div class="row">
                        <t t-foreach="properties" t-as="property">
                            <div class="col-lg-4 col-md-6 mb-4">
                                <div class="card shadow-sm h-100">
                                    <img t-attf-src="data:image/png;base64,{{property.image_1920}}"
                                         t-attf-alt="{{property.name}}"
                                         class="card-img-top"/>

                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title">
                                            <a t-att-href="'/property/%s/%d' % (property.property_type, property.id)"
                                               class="btn btn-primary mt-auto">View Details
                                            </a>

                                        </h5>
                                        <p class="card-text text-muted mb-2">
                                            <strong>Location:</strong>
                                            <t t-out="property.location or 'N/A'"/>
                                        </p>

                                        <p class="card-text mb-2">
                                            <strong>Price:</strong>
                                            <t t-out="property.rental_price or 'N/A'"/>
                                        </p>


                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                </section>

                <!-- Footer Newsletter / Call to Action -->
                <section id="property-cta" class="py-5 bg-secondary text-white text-center">
                    <div class="container">
                        <h2>Stay Updated</h2>
                        <p>Subscribe to our newsletter for the latest property listings.</p>
                        <!-- Future: Subscription form -->
                    </div>
                </section>

            </main>
        </t>
    </template>
</odoo>
